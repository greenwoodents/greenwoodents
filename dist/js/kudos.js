var Kudos=function(){"use strict";var e,t,n,o={},i={startingNumber:0,wrapper:".script-kudos",container:".kudos-counter",text:".script-kudos > p",numberClass:"kudos-number",animateClass:"kudos-animate",animation:{numberPosition:[25,0],helperPosition:[8,0]},dialog:{intro:"Kudos",hover:"Don't move!",finish:"Thanks!"}},r=[],a=!1,u=!1,c={raw:[],helpers:[]};o.config=i;var s=function(o,r){c={raw:[],helpers:[]},e=document.querySelector(i.wrapper),t=document.querySelector(i.container),n=document.querySelector(i.text),o&&(i.startingNumber=o);for(var a=i.startingNumber.toString(),u=0;u<a.length;u++)c.raw[u]=a.charAt(u);for(var s=(i.startingNumber+1).toString(),m=0;m<s.length;m++)c.helpers[m]=s.charAt(m);e.addEventListener("mouseover",p,!1),e.addEventListener("mouseleave",h,!1),e.addEventListener("click",f,!1),l(),r?y():d(),e.classList.remove("hidden"),e.classList.add("show-from-bottom")};o.init=s;var l=function(){var e=document.createDocumentFragment();[].forEach.call(c.helpers,function(t,n,o){void 0===c.raw[n]&&(c.raw[n]="");var r=document.createElement("DIV");r.classList.add(i.numberClass),r.innerHTML='<p class="kudos-number-helper" style="top:'+i.animation.helperPosition[0]+'px; opacity: 0;">'+c.helpers[n]+'</p><p class="kudos-number-visible" style="top:'+i.animation.numberPosition[0]+'px; opacity: 1;">'+c.raw[n]||"0</p>",c.helpers[n]!==c.raw[n]&&r.classList.add(i.animateClass),e.appendChild(r)}),t.innerHTML="",t.appendChild(e)},d=function(){r=[],a=!1,u=!1;var e=document.querySelectorAll("."+i.animateClass);[].forEach.call(e,function(e,t,n){var o=e.querySelector(".kudos-number-helper"),i=e.querySelector(".kudos-number-visible"),a=new TimelineLite({paused:!0});a.to(i,.5,{top:36}).to(i,.5,{top:46,opacity:0}).call(function(){v()}).to(o,1,{opacity:1},"-=0.25").to(o,2.2,{top:25,ease:Elastic.easeOut},"-=1"),r[t]=a})},m=function(){u===!1&&[].forEach.call(r,function(e,t,n){setTimeout(function(){e.restart()},400*t)})},p=function(e){window.matchMedia("(max-width: 680px)").matches||(u===!1&&(n.innerHTML=i.dialog.hover),a===!1&&(m(),a=!0))},h=function(e){window.matchMedia("(max-width: 680px)").matches||u===!1&&([].forEach.call(r,function(e,t,n){e.reverse()}),a=!1,n.innerHTML=i.dialog.intro)},f=function(){window.matchMedia("(max-width: 680px)").matches&&(document.querySelector(".kudos-number-visible").setAttribute("style","top:"+i.animation.helperPosition[0]+"px; opacity: 0;"),document.querySelector(".kudos-number-helper").setAttribute("style","top:"+i.animation.numberPosition[0]+"px; opacity: 1;"))},v=function(){y(),setTimeout(function(){b()},2e3)},y=function(){u=!0,a=!1,n.innerHTML=i.dialog.finish};o.done=y;var b=function(){KudosFirebase.add()};return o.extendDone=b,o}(),KudosFirebase=function(){"use strict";var e=new Firebase("https://ents-testing.firebaseio.com/"),t=e.child("kudos"),n=(e.getAuth(),{}),o=function(){var n=document.querySelectorAll(".script-kudos")||!1;if(n.length<=0)return!1;var o=e.getAuth();null==o&&e.authAnonymously(function(e,t){});var i=document.location.pathname.replace(/[\/-]/g,"");t.child(i).on("value",function(n){var o=function(e){if(n){var o=n.val(),r=0;if(o)for(var a in o.likes)r++}t.child(i).child("likes").child(e.uid).once("value",function(e){null!==e.val()?Kudos.init(r,!0):Kudos.init(r)})},r=e.getAuth();null==r?e.authAnonymously(function(e,t){o(t)}):o(r)})};n.init=o;var i=function(){var e=document.querySelectorAll(".menu-block");[].forEach.call(e,function(e,n,o){var i=e.querySelector(".project-info-title").innerHTML.toLowerCase().replace(".","").replace("#","").replace("$","").replace(",","").trim(),r=e.querySelector(".count-of-kudos");r&&(e.querySelector(".kudos-view").classList.remove("hidden"),t.child(i).on("value",function(e){if(e){var t=e.val(),n=0;if(t)for(var o in t.likes)n++}r.innerText=n}))})};n.initMenu=i;var r=function(){var n=function(){i&&(t.child(o).child("likes").child(i.uid).set({count:1}),ga("send","event","kudos","added"))},o=document.location.pathname.replace(/[\/-]/g,""),i=e.getAuth();null==i?e.authAnonymously(function(e,t){n()}):n()};return o(),i(),n.add=r,n}();app.extFn.push(KudosFirebase.init);