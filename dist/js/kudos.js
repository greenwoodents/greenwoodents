var Kudos=function(){"use strict";var e,t,n,i={},o={startingNumber:0,wrapper:".script-kudos",container:".kudos-counter",text:".script-kudos > p",numberClass:"kudos-number",animateClass:"kudos-animate",animation:{numberPosition:[25,0],helperPosition:[8,0]},dialog:{intro:"Kudos",hover:"Don't move!",finish:"Thanks!"}},r=[],a=!1,u=!1,s={raw:[],helpers:[]};i.config=o;var c=function(i,r){s={raw:[],helpers:[]},e=document.querySelector(o.wrapper),t=document.querySelector(o.container),n=document.querySelector(o.text),i&&(o.startingNumber=i);for(var a=o.startingNumber.toString(),u=0;u<a.length;u++)s.raw[u]=a.charAt(u);for(var c=(o.startingNumber+1).toString(),m=0;m<c.length;m++)s.helpers[m]=c.charAt(m);e.addEventListener("mouseover",p,!1),e.addEventListener("mouseleave",h,!1),e.addEventListener("click",v,!1),l(),r?b():d(),e.classList.remove("hidden"),e.classList.add("show-from-bottom")};i.init=c;var l=function(){var e=document.createDocumentFragment();[].forEach.call(s.helpers,function(t,n,i){void 0===s.raw[n]&&(s.raw[n]="");var r=document.createElement("DIV");r.classList.add(o.numberClass),r.innerHTML='<p class="kudos-number-helper" style="top:'+o.animation.helperPosition[0]+'px; opacity: 0;">'+s.helpers[n]+'</p><p class="kudos-number-visible" style="top:'+o.animation.numberPosition[0]+'px; opacity: 1;">'+s.raw[n]||"0</p>",s.helpers[n]!==s.raw[n]&&r.classList.add(o.animateClass),e.appendChild(r)}),t.innerHTML="",t.appendChild(e)},d=function(){r=[],a=!1,u=!1;var e=document.querySelectorAll("."+o.animateClass);[].forEach.call(e,function(e,t,n){var i=e.querySelector(".kudos-number-helper"),o=e.querySelector(".kudos-number-visible"),a=new TimelineLite({paused:!0});a.to(o,.5,{top:36}).to(o,.5,{top:46,opacity:0}).call(function(){f()}).to(i,1,{opacity:1},"-=0.25").to(i,2.2,{top:25,ease:Elastic.easeOut},"-=1"),r[t]=a})},m=function(){u===!1&&[].forEach.call(r,function(e,t,n){setTimeout(function(){e.restart()},400*t)})},p=function(e){window.matchMedia("(max-width: 680px)").matches||(u===!1&&(n.innerHTML=o.dialog.hover),a===!1&&(m(),a=!0))},h=function(e){window.matchMedia("(max-width: 680px)").matches||u===!1&&([].forEach.call(r,function(e,t,n){e.reverse()}),a=!1,n.innerHTML=o.dialog.intro)},v=function(){window.matchMedia("(max-width: 680px)").matches&&(document.querySelector(".kudos-number-visible").setAttribute("style","top:"+o.animation.helperPosition[0]+"px; opacity: 0;"),document.querySelector(".kudos-number-helper").setAttribute("style","top:"+o.animation.numberPosition[0]+"px; opacity: 1;"))},f=function(){b(),setTimeout(function(){y()},2e3)},b=function(){u=!0,a=!1,n.innerHTML=o.dialog.finish};i.done=b;var y=function(){KudosFirebase.add()};return i.extendDone=y,i}(),KudosFirebase=function(){"use strict";{var e=new Firebase("https://ents-testing.firebaseio.com/"),t=e.child("kudos");e.getAuth()}visible={};var n=function(){var n=document.querySelectorAll(".script-kudos")||!1;if(n.length<=0)return!1;var i=e.getAuth();null==i&&e.authAnonymously(function(e,t){});var o=document.location.pathname.replace(/[\/-]/g,"");t.child(o).on("value",function(n){var i=function(e){if(n){var i=n.val(),r=0;if(i)for(var a in i.likes)r++}t.child(o).child("likes").child(e.uid).once("value",function(e){null!==e.val()?Kudos.init(r,!0):Kudos.init(r)})},r=e.getAuth();null==r?e.authAnonymously(function(e,t){i(t)}):i(r)})};visible.init=n;var i=function(){var e=document.querySelectorAll(".menu-block");[].forEach.call(e,function(e,n,i){var o=e.querySelector(".project-info-title").innerHTML.toLowerCase().replace(".","").replace("#","").replace("$","").replace(",","").trim(),r=e.querySelector(".count-of-kudos");e.querySelector(".kudos-view").classList.remove("hidden"),t.child(o).on("value",function(e){if(e){var t=e.val(),n=0;if(t)for(var i in t.likes)n++}r.innerText=n})})};visible.initMenu=i;var o=function(){var n=function(){o&&(t.child(i).child("likes").child(o.uid).set({count:1}),ga("send","event","kudos","added"))},i=document.location.pathname.replace(/[\/-]/g,""),o=e.getAuth();null==o?e.authAnonymously(function(e,t){n()}):n()};return visible.add=o,visible}();app.extFn.push(KudosFirebase.init),KudosFirebase.initMenu();