var Kudos=function(){"use strict";var e,t,n,o={},i={startingNumber:0,wrapper:".script-kudos",container:".kudos-counter",text:".script-kudos > p",numberClass:"kudos-number",animateClass:"kudos-animate",animation:{numberPosition:[25,0],helperPosition:[8,0]},dialog:{intro:"Kudos",hover:"Don't move!",finish:"Thanks!"}},a=[],r=!1,s=!1,u={raw:[],helpers:[]};o.config=i;var l=function(o,a){u={raw:[],helpers:[]},e=document.querySelector(i.wrapper),t=document.querySelector(i.container),n=document.querySelector(i.text),o&&(i.startingNumber=o);for(var r=i.startingNumber.toString(),s=0;s<r.length;s++)u.raw[s]=r.charAt(s);for(var l=(i.startingNumber+1).toString(),m=0;m<l.length;m++)u.helpers[m]=l.charAt(m);e.addEventListener("mouseover",h,!1),e.addEventListener("mouseleave",p,!1),e.addEventListener("click",v,!1),c(),a?b():d(),e.classList.remove("hidden"),e.classList.add("show-from-bottom")};o.init=l;var c=function(){var e=document.createDocumentFragment();[].forEach.call(u.helpers,function(t,n,o){void 0===u.raw[n]&&(u.raw[n]="");var a=document.createElement("DIV");a.classList.add(i.numberClass),a.innerHTML='<p class="kudos-number-helper" style="top:'+i.animation.helperPosition[0]+'px; opacity: 0;">'+u.helpers[n]+'</p><p class="kudos-number-visible" style="top:'+i.animation.numberPosition[0]+'px; opacity: 1;">'+u.raw[n]||"0</p>",u.helpers[n]!==u.raw[n]&&a.classList.add(i.animateClass),e.appendChild(a)}),t.innerHTML="",t.appendChild(e)},d=function(){a=[],r=!1,s=!1;var e=document.querySelectorAll("."+i.animateClass);[].forEach.call(e,function(e,t,n){var o=e.querySelector(".kudos-number-helper"),i=e.querySelector(".kudos-number-visible"),r=new TimelineLite({paused:!0});r.to(i,.5,{top:36}).to(i,.5,{top:46,opacity:0}).call(function(){f()}).to(o,1,{opacity:1},"-=0.25").to(o,2.2,{top:25,ease:Elastic.easeOut},"-=1"),a[t]=r})},m=function(){s===!1&&(console.log(a.reverse()),[].forEach.call(a,function(e,t,n){console.log(t),setTimeout(function(){e.restart()},400*t)}))},h=function(e){window.matchMedia("(max-width: 680px)").matches||(s===!1&&(n.innerHTML=i.dialog.hover),r===!1&&(m(),r=!0))},p=function(e){window.matchMedia("(max-width: 680px)").matches||s===!1&&([].forEach.call(a,function(e,t,n){e.reverse()}),r=!1,n.innerHTML=i.dialog.intro)},v=function(){window.matchMedia("(max-width: 680px)").matches&&(document.querySelector(".kudos-number-visible").setAttribute("style","top:"+i.animation.helperPosition[0]+"px; opacity: 0;"),document.querySelector(".kudos-number-helper").setAttribute("style","top:"+i.animation.numberPosition[0]+"px; opacity: 1;"))},f=function(){b(),setTimeout(function(){g()},2e3)},b=function(){s=!0,r=!1,n.innerHTML=i.dialog.finish};o.done=b;var g=function(){KudosFirebase.add()};return o.extendDone=g,o}(),KudosFirebase=function(){{var e=new Firebase("https://ents-testing.firebaseio.com/"),t=e.child("kudos");e.getAuth()}visible={};var n=function(){var n=document.querySelectorAll(".script-kudos")||!1;if(n.length<=0)return console.log("true"),!1;var o=e.getAuth();null==o&&e.authAnonymously(function(e,t){}),console.log("ININIT");var i=document.location.pathname.replace(/[\/-]/g,"");console.log(i),t.child(i).on("value",function(n){var o=function(e){if(n){var o=n.val(),a=0;if(o)for(var r in o.likes)a++}t.child(i).child("likes").child(e.uid).once("value",function(e){null!==e.val()?(console.log("hlasoval",a),Kudos.init(a,!0)):(console.log("Nehlasoval",a),Kudos.init(a))})},a=e.getAuth();null==a?e.authAnonymously(function(e,t){o(t)}):o(a)})};visible.init=n;var o=function(){var n=function(){i&&(t.child(o).child("likes").child(i.uid).set({count:1}),ga("send","event","kudos","added"))},o=document.location.pathname.replace(/[\/-]/g,""),i=e.getAuth();null==i?e.authAnonymously(function(e,t){n()}):n()};return visible.add=o,visible}();app.extFn.push(KudosFirebase.init);